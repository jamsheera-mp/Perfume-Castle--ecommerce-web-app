<%- include('../partials/user/header.ejs') %>
	<style>
		.product-cart-wrap button[type="submit"]:hover {
			background-color: #45a049;
		}

		.product-cart-wrap .wishlist-btn:hover {
			transform: scale(1.1);
		}

		.product-cart-wrap .product-img img {
			transition: transform 0.3s ease;
		}

		.product-cart-wrap .product-img:hover img {
			transform: scale(1.05);
		}

		.wishlist-btn {
			position: absolute;
			top: 10px;
			right: 10px;
			z-index: 10;
			border: none;
			padding: 8px;
			background: transparent !important;
			cursor: pointer;
			transition: all 0.3s ease;
		}

		/* Default state - outlined heart */
		.wishlist-btn .wishlist-icon-outline {
			display: block;
			color: #ff4b4b;
		}

		.wishlist-btn .wishlist-icon-filled {
			display: none;
			color: #ff4b4b;
		}

		/* Hover state */
		.wishlist-btn:hover .wishlist-icon-outline,
		.wishlist-btn:hover .wishlist-icon-filled {
			transform: scale(1.1);
			color: #ff0000;
		}

		/* Active state (in wishlist) */
		.wishlist-btn.in-wishlist .wishlist-icon-outline {
			display: none;
		}

		.wishlist-btn.in-wishlist .wishlist-icon-filled {
			display: block;
		}

		/* Animation */
		@keyframes heartBeat {
			0% {
				transform: scale(1);
			}

			50% {
				transform: scale(1.2);
			}

			100% {
				transform: scale(1);
			}
		}

		.wishlist-btn.animate .wishlist-icon-outline,
		.wishlist-btn.animate .wishlist-icon-filled {
			animation: heartBeat 0.3s ease-in-out;
		}
	</style>

	<!-----------------------------------------------main slider section starts  -------------------------------------------------------->
	<main class="main">
		<section class="home-slider position-relative pt-50">
			<div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
				<div class="single-hero-slider single-animation-wrap">
					<div class="container">
						<div class="row align-items-center slider-animated-1">
							<div class="col-lg-5 col-md-6">
								<div class="hero-slider-content-2">
									<h4 class="animated">Exclusive Trade-In Offer</h4>
									<h2 class="animated fw-900">Luxurious Fragrances</h2>
									<h1 class="animated fw-900 text-brand">For Every Occasion</h1>
									<p class="animated">Get up to 50% off on selected perfumes</p>
									<a class="animated btn btn-brush btn-brush-3" href="/product"> Shop Now
									</a>
								</div>
							</div>
							<div class="col-lg-7 col-md-6">
								<div class="single-slider-img single-slider-img-1">
									<img class="animated slider-1-1" src="/uploads/slider-images/bottle-with-flower.jpg"
										alt="" style="width: 100%; height: 100%; object-fit: contain;">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="single-hero-slider single-animation-wrap">
					<div class="container">
						<div class="row align-items-center slider-animated-1">
							<div class="col-lg-5 col-md-6">
								<div class="hero-slider-content-2">
									<h4 class="animated">Special Promotions</h4>
									<h2 class="animated fw-900">Trending Perfumes</h2>
									<h1 class="animated fw-900 text-7">For Him & Her</h1>
									<p class="animated">Discover timeless scents at great prices</p>
									<a class="animated btn btn-brush btn-brush-2" href="/product"> Discover
										Now </a>
								</div>
							</div>
							<div class="col-lg-7 col-md-6">
								<div class="single-slider-img single-slider-img-1">
									<img class="animated slider-1-2 " src="/uploads/slider-images/pic4.jpg" alt=""
										style="width: 100%; height: 100%; object-fit: contain;">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="single-hero-slider single-animation-wrap">
					<div class="container">
						<div class="row align-items-center slider-animated-1">
							<div class="col-lg-5 col-md-6">
								<div class="hero-slider-content-2">
									<h4 class="animated">New Arrivals</h4>
									<h2 class="animated fw-900">Captivating Scents</h2>
									<h1 class="animated fw-900 text-8">From Top Brands</h1>
									<p class="animated">Shop the latest perfumes and colognes</p>
									<a class="animated btn btn-brush btn-brush-1" href="/product"> Shop Now
									</a>
								</div>
							</div>
							<div class="col-lg-7 col-md-6">
								<div class="single-slider-img single-slider-img-1">
									<img class="animated slider-1-3" src="/uploads/slider-images/pic7.jpg" alt=""
										style="width: 100%; height: 100%; object-fit: contain;">
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="slider-arrow hero-slider-1-arrow"></div>
		</section>

		<!-----------------------------------------------main slider section ends  -------------------------------------------------------->

		<!-- <section class="featured section-padding position-relative">
		<div class="container">
			<div class="row">
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-1.png" alt="">
						<h4 class="bg-1">Free Shipping</h4>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-2.png" alt="">
						<h4 class="bg-3">Online Order</h4>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-3.png" alt="">
						<h4 class="bg-2">Save Money</h4>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-4.png" alt="">
						<h4 class="bg-4">Promotions</h4>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-5.png" alt="">
						<h4 class="bg-5">Happy Sell</h4>
					</div>
				</div>
				<div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
					<div class="banner-features wow fadeIn animated hover-up">
						<img src="assets/imgs/theme/icons/feature-6.png" alt="">
						<h4 class="bg-6">24/7 Support</h4>
					</div>
				</div>
			</div>
		</div>
	</section> -->

		<!-- ---------------------------------------------------------Product Listing Section Starts ------------------------------------------------->
		<section class="product-tabs section-padding position-relative wow fadeIn animated">
			<div class="bg-square"></div>
			<div class="container">
				<div class="tab-header">
					<ul class="nav nav-tabs" id="myTab" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="nav-tab-one" data-bs-toggle="tab"
								data-bs-target="#tab-one" type="button" role="tab" aria-controls="tab-one"
								aria-selected="true">Featured</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two"
								type="button" role="tab" aria-controls="tab-two" aria-selected="false">Popular</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three"
								type="button" role="tab" aria-controls="tab-three" aria-selected="false">New
								added</button>
						</li>
					</ul>
					<a href="/product" class="view-more d-none d-md-flex">View More<i
							class="fi-rs-angle-double-small-right"></i></a>
				</div>
				<!--End nav-tabs-->


				<!----------------------------------- All products Listings ---------------------------------------------------->
				<div class="tab-content wow fadeIn animated" id="myTabContent">
					<div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
						<div class="row product-grid-4">
							<% if(products && products.length> 0) { %>
								<% products.forEach(product=>{ %>
									<div class="col-lg-3 col-md-4 col-12 col-sm-6">
										<div class="product-cart-wrap mb-30"
											style="position: relative; border: 1px solid #eee; border-radius: 8px; overflow: hidden;">
											<div class="product-img-action-wrap">
												<div class="product-img product-img-zoom" style="position: relative;">
													<a href="/product/<%= product._id %>">
														<img src="/uploads/re-image/<%= product.productImage[0] %>"
															alt="<%= product.productName %>"
															style="width: 100%; height: auto;">
														<img class="hover-img"
															src="/uploads/re-image/<%= product.productImage[0] %>"
															alt="<%= product.productName %>"
															style="width: 100%; height: auto;">
													</a>

													<!-- Wishlist button at top-right -->
													<button type="button"
														class="wishlist-btn <%= product.isInWishlist ? 'in-wishlist' : '' %>"
														onclick="toggleWishlist(event, '<%= product._id %>')"
														aria-label="Toggle Wishlist">
														<svg class="wishlist-icon-outline"
															xmlns="http://www.w3.org/2000/svg" width="24" height="24"
															viewBox="0 0 24 24" fill="none" stroke="currentColor"
															stroke-width="2" stroke-linecap="round"
															stroke-linejoin="round">
															<path
																d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
															</path>
														</svg>
														<svg class="wishlist-icon-filled"
															xmlns="http://www.w3.org/2000/svg" width="24" height="24"
															viewBox="0 0 24 24" fill="currentColor"
															stroke="currentColor" stroke-width="2"
															stroke-linecap="round" stroke-linejoin="round">
															<path
																d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
															</path>
														</svg>
													</button>
												</div>
											</div>
											<div class="product-content-wrap" style="padding: 15px;">
												<div class="product-category">
													<a href="" style="color: #666; font-size: 14px;">
														<% product.Category %>
													</a>
												</div>
												<h2 style="margin: 10px 0; font-size: 16px; font-weight: 600;">
													<a href="" style="color: #333; text-decoration: none;">
														<%= product.productName %>
													</a>
												</h2>
												<div class="rating-result" title="90%" style="margin-bottom: 10px;">
													<span>
														<span>90%</span>
													</span>
												</div>
												<div class="product-price" style="margin-bottom: 15px;">
													<span
														style="font-size: 18px; font-weight: 600; color: #333;">â‚¹<%= product.salePrice %></span>
													<span
														style="text-decoration: line-through; color: #999; margin-left: 10px;">
														<% product.salePrice %>
													</span>
												</div>

												<!-- Stock status with improved styling -->
												<% if (product.quantity> 0) { %>
													<p style="color: #00a650; font-size: 14px; margin-bottom: 15px;">
														Stock Left: <%= product.quantity %>
													</p>
													<% } else { %>
														<p
															style="color: #ff4b4b; font-size: 14px; margin-bottom: 15px;">
															Out of Stock
														</p>
														<% } %>

															<!-- Improved Add to Cart button -->
															<div class="product-action-1 show">
																<form id="addToCartForm"
																	data-product-id="<%= product._id %>"
																	data-quantity="1">
																	<button type="submit" aria-label="Add To Cart"
																		style="width: 100%; padding: 12px; background-color: #4CAF50; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer; transition: background-color 0.3s ease;">
																		<i class="fi-rs-shopping-bag-add"
																			style="font-size: 20px;"></i>
																		Add to Cart
																	</button>
																</form>
															</div>
											</div>
										</div>
									</div>
									<% }) %>
										<% } else { %>
											<div class="col-12">
												<p>No products available.</p>
											</div>
											<% } %>
						</div>
					</div>
				</div>
				<!-----------------------------------En tab one (Featured)------------------------------------------->
				<div class="tab-pane fade" id="tab-two" role="tabpanel" aria-labelledby="tab-two">
					<div class="row product-grid-4">
						<div class="col-lg-3 col-md-4 col-12 col-sm-6">
							<div class="product-cart-wrap mb-30">
								<div class="product-img-action-wrap">
									<div class="product-img product-img-zoom">
										<a href="/product">
											<img class="default-img" src="assets/imgs/shop/product-9-1.jpg" alt="">
											<img class="hover-img" src="assets/imgs/shop/product-9-2.jpg" alt="">
										</a>
									</div>
									<div class="product-action-1">
										<a aria-label="Quick view" class="action-btn hover-up" data-bs-toggle="modal"
											data-bs-target="#quickViewModal"><i class="fi-rs-eye"></i></a>
										<a aria-label="Add To Wishlist" class="action-btn hover-up"
											href="shop-wishlist.html"><i class="fi-rs-heart"></i></a>
										<a aria-label="Compare" class="action-btn hover-up" href=""><i
												class="fi-rs-shuffle"></i></a>
									</div>
									<div class="product-badges product-badges-position product-badges-mrg">
										<span class="hot">Hot</span>
									</div>
								</div>
								<div class="product-content-wrap">
									<div class="product-category">
										<a href="shop-grid-right.html">Donec </a>
									</div>
									<h2><a href="shop-product-right.html">Lorem ipsum dolor</a></h2>
									<div class="rating-result" title="90%">
										<span>
											<span>90%</span>
										</span>
									</div>
									<div class="product-price">
										<span>$238.85 </span>
										<span class="old-price">$245.8</span>
									</div>
									<div class="product-action-1 show">
										<a aria-label="Add To Cart" class="action-btn hover-up" href="shop-cart.html"><i
												class="fi-rs-shopping-bag-add"></i></a>
									</div>
								</div>
							</div>
						</div>






					</div>
					<!--End product-grid-4-->
				</div>
				<!-------------------------------------------------En tab two (Popular)------------------------------------------>
				<div class="tab-pane fade" id="tab-three" role="tabpanel" aria-labelledby="tab-three">
					<div class="row product-grid-4">
						<div class="col-lg-3 col-md-4 col-12 col-sm-6">
							<div class="product-cart-wrap mb-30">
								<div class="product-img-action-wrap">
									<div class="product-img product-img-zoom">
										<a href="shop-product-right.html">
											<img class="default-img" src="assets/imgs/shop/product-2-1.jpg" alt="">
											<img class="hover-img" src="assets/imgs/shop/product-2-2.jpg" alt="">
										</a>
									</div>
									<div class="product-action-1">
										<a aria-label="Quick view" class="action-btn hover-up" data-bs-toggle="modal"
											data-bs-target="#quickViewModal"><i class="fi-rs-eye"></i></a>
										<a aria-label="Add To Wishlist" class="action-btn hover-up" href="/wishlist"><i
												class="fi-rs-heart"></i></a>
										<a aria-label="Compare" class="action-btn hover-up" href="shop-compare.html"><i
												class="fi-rs-shuffle"></i></a>
									</div>
									<div class="product-badges product-badges-position product-badges-mrg">
										<span class="hot">Hot</span>
									</div>
								</div>
								<div class="product-content-wrap">
									<div class="product-category">
										<a href="shop-grid-right.html">Music</a>
									</div>
									<h2><a href="shop-product-right.html">Donec ut nisl rutrum</a></h2>
									<div class="rating-result" title="90%">
										<span>
											<span>90%</span>
										</span>
									</div>
									<div class="product-price">
										<span>$238.85 </span>
										<span class="old-price">$245.8</span>
									</div>
									<div class="product-action-1 show">
										<a aria-label="Add To Cart" class="action-btn hover-up" href="/addtocart"><i
												class="fi-rs-shopping-bag-add"></i></a>
									</div>
								</div>
							</div>
						</div>

					</div>
					<!--End product-grid-4-->
				</div>
				<!----------------------------------------------------En tab three (New added)---------------------------------------->
			</div>
			<!--End tab-content-->
			</div>
		</section>

		<!-- ---------------------------------------------------------Product Listing Section Ends ------------------------------------------------->

		<!-- --------------------------------------------------------Categories Section Begins --------------------------------------------------------->
		<section class="popular-categories section-padding mt-15 mb-25">
			<div class="container wow fadeIn animated">
				<h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
				<div class="carausel-6-columns-cover position-relative">
					<div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-arrows">
					</div>
					<div class="carausel-6-columns" id="carausel-6-columns">
						<% categories.forEach(category=>{ %>
							<div class="card-1">
								<figure class=" img-hover-scale overflow-hidden">
									<!--<a href="/product"><img src="" alt="<%= category.name %>"></a>-->
								</figure>
								<h5><a href="/product">
										<%= category.name %>
									</a></h5>
							</div>
							<% }) %>
					</div>
				</div>
			</div>
		</section>

		<!-- -----------------------------------------Categories Section Ends --------------------------------------------------------->

		<!-------------------------------------------------------New Arrivals Sections Begins----------------------------------------------------------->
		<!--<section class="section-padding">
		<div class="container wow fadeIn animated">
			<h3 class="section-title mb-20"><span>New</span> Arrivals</h3>
			<div class="carausel-6-columns-cover position-relative">
				<div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-2-arrows">
				</div>
				<div class="carausel-6-columns carausel-arrow-center" id="carausel-6-columns-2">
					<div class="product-cart-wrap small hover-up">
						<div class="product-img-action-wrap">
							<div class="product-img product-img-zoom">
								<a href="shop-product-right.html">
									<img class="default-img" src="assets/imgs/shop/product-2-1.jpg" alt="">
									<img class="hover-img" src="assets/imgs/shop/product-2-2.jpg" alt="">
								</a>
							</div>
							<div class="product-action-1">
								<a aria-label="Quick view" class="action-btn small hover-up" data-bs-toggle="modal"
									data-bs-target="#quickViewModal">
									<i class="fi-rs-eye"></i></a>
								<a aria-label="Add To Wishlist" class="action-btn small hover-up"
									href="shop-wishlist.html" tabindex="0"><i class="fi-rs-heart"></i></a>
								<a aria-label="Compare" class="action-btn small hover-up" href="shop-compare.html"
									tabindex="0"><i class="fi-rs-shuffle"></i></a>
							</div>
							<div class="product-badges product-badges-position product-badges-mrg">
								<span class="hot">Hot</span>
							</div>
						</div>
						<div class="product-content-wrap">
							<h2><a href="shop-product-right.html">Lorem ipsum dolor</a></h2>
							<div class="rating-result" title="90%">
								<span>
								</span>
							</div>
							<div class="product-price">
								<span>$238.85 </span>
								<span class="old-price">$245.8</span>
							</div>
						</div>
					</div>
					<!--End product-cart-wrap-2-->

		<!--</div>
			</div>
		</div>
	</section>-->

		<!-------------------------------------------------------New Arrivals Sections Ends----------------------------------------------------------->


		<!---------------------------------------------------Brands Section Begins--------------------------------------------------------->
		<section class="section-padding">
			<div class="container">
				<h3 class="section-title mb-20 wow fadeIn animated"><span>Featured</span> Brands</h3>
				<div class="carausel-6-columns-cover position-relative wow fadeIn animated">
					<div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-3-arrows">
					</div>
					<div class="carausel-6-columns text-center" id="carausel-6-columns-3">
						<% brands.forEach(brand=>{ %>
							<div class="brand-logo"
								style="width: 150px; height: 150px; display: inline-block; margin: 10px;">
								<img class="img-grey-hover img-fluid"
									style="width: 100%; height: 100%; object-fit: contain;"
									src="/uploads/re-image/<%= brand.brandImage[0] %>" alt="<%= brand.brandName %>">

							</div>
							<% }) %>
					</div>
				</div>
			</div>
		</section>
		<!---------------------------------------------------Brands Section Ends--------------------------------------------------------->



	</main>

	<!--<script>
		function addToWishlist(event, productId) {
			event.preventDefault();
			fetch(`/addToWishlist/${productId}`, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						Swal.fire({
							icon: 'success',
							title: 'Added to Wishlist',
							text: data.message,
							confirmButtonText: 'OK'
						});
					} else {
						Swal.fire({
							icon: 'error',
							title: 'Error',
							text: data.message || 'Failed to add to wishlist',
							confirmButtonText: 'OK'
						});
					}
				})
				.catch(error => {
					console.error('Error:', error);
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: 'An error occurred while adding to wishlist',
						confirmButtonText: 'OK'
					});
				});
			return false;
		}
	</script>-->
	<!----------------------------add to cart-------------------------->
	<script>
		// Wait for the DOM to be fully loaded
		document.addEventListener('DOMContentLoaded', function () {
			// Get all forms with the ID 'addToCartForm'
			const forms = document.querySelectorAll('form[id^="addToCartForm"]');

			forms.forEach(form => {
				form.addEventListener('submit', function (event) {
					event.preventDefault(); // Prevent form from submitting the traditional way

					const productId = this.getAttribute('data-product-id');
					const quantity = this.getAttribute('data-quantity');

					// Call the addToCart function to handle the logic
					addToCart(productId, quantity);
				});
			});
		});

		function addToCart(productId, quantity) {
			fetch('/addToCart', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({ productId, quantity })
			})
				.then(response => {
					if (!response.ok) {
						throw new Error('Network response was not ok');
					}
					return response.json();
				})
				.then(data => {
					if (data.success) {
						Swal.fire({
							icon: 'success',
							title: 'Product added to cart',
							text: 'Item successfully added to your cart!',
							confirmButtonText: 'OK'
						});
					} else {
						throw new Error(data.error || 'Failed to add to cart');
					}
				})
				.catch(error => {
					console.error('Error:', error);
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: error.message || 'An error occurred while adding to cart',
						confirmButtonText: 'OK'
					});
				});
		}


	</script>
	<!--<script>
		function toggleWishlist(event, productId, isInWishlist) {
			event.preventDefault();

			if (isInWishlist) {
				// If it's in wishlist, show confirmation before removing
				Swal.fire({
					title: 'Are you sure?',
					text: 'Do you want to remove this product from your wishlist?',
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, remove it!',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					if (result.isConfirmed) {
						handleWishlistAction(productId, false);
					}
				});
			} else {
				// If it's not in wishlist, add directly
				handleWishlistAction(productId, true);
			}
			return false;
		}

		function handleWishlistAction(productId, isAdding) {
			const url = isAdding ? `/addToWishlist/${productId}` : `/removeFromWishlist/${productId}`;
			const button = document.querySelector(`button[onclick*="${productId}"]`);

			fetch(url, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						// Toggle the wishlist state visually
						button.classList.toggle('in-wishlist');
						button.classList.add('animate');

						// Update the onclick handler with new state
						const newState = !isAdding;
						button.setAttribute('onclick', `toggleWishlist(event, '${productId}', ${newState})`);

						// Remove animation class after animation completes
						setTimeout(() => {
							button.classList.remove('animate');
						}, 300);

						// Show success message
						Swal.fire({
							icon: 'success',
							title: isAdding ? 'Added to Wishlist' : 'Removed from Wishlist',
							text: data.message,
							confirmButtonText: 'OK'
						});
					} else {
						Swal.fire({
							icon: 'error',
							title: 'Error',
							text: data.message || `Failed to ${isAdding ? 'add to' : 'remove from'} wishlist`,
							confirmButtonText: 'OK'
						});
					}
				})
				.catch(error => {
					console.error('Error:', error);
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: `An error occurred while ${isAdding ? 'adding to' : 'removing from'} wishlist`,
						confirmButtonText: 'OK'
					});
				});
		}
	</script>-->
	<script>
		function toggleWishlist(event, productId) {
			event.preventDefault();

			const button = event.currentTarget;

			fetch(`/toggleWishlist/${productId}`, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						// Toggle the wishlist state visually
						button.classList.toggle('in-wishlist');
						button.classList.add('animate');

						// Remove animation class after animation completes
						setTimeout(() => {
							button.classList.remove('animate');
						}, 300);

						// Show success message
						Swal.fire({
							icon: 'success',
							title: data.action === 'added' ? 'Added to Wishlist' : 'Removed from Wishlist',
							text: data.message,
							confirmButtonText: 'OK'
						});
					} else {
						Swal.fire({
							icon: 'error',
							title: 'Error',
							text: data.message || 'Failed to update wishlist',
							confirmButtonText: 'OK'
						});
					}
				})
				.catch(error => {
					console.error('Error:', error);
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: 'An error occurred while updating wishlist',
						confirmButtonText: 'OK'
					});
				});
			return false;
		}
	</script>
	<!----------------------------add to cart end-------------------------->

	<%- include('../partials/user/footer.ejs') %>